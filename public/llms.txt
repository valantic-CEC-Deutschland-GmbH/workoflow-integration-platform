# Workoflow Integration Platform

> AI-first integration hub providing unified REST API access to 85+ tools across Jira, Confluence, SharePoint, Outlook Mail, Outlook Calendar, MS Teams, GitLab, Trello, SAP C4C, BCS (Projektron), and platform services. Built for AI agents, automation workflows, and conversational interfaces.

**Last Updated**: 2026-02-25
**Version**: 1.2.0
**Architecture**: Multi-tenant Symfony 8.0 platform with plugin-based integration system
**Authentication**: OAuth2 (Google), Magic Links, Basic Auth + JWT for API
**Tool Access Modes**: Read Only / Standard / Full — per-user control over which tool categories (Read, Write, Delete) AI agents can use
**Tech Stack**: PHP 8.5, Symfony 8.0, FrankenPHP, MariaDB 12, Redis 8, MinIO S3

## Core Concepts

The platform follows a **Skills-based architecture** where integrations are treated as AI agent "skills":

- **Personalized Skills**: User-specific integrations requiring external credentials (Jira, Confluence, SharePoint, Outlook Mail, Outlook Calendar, MS Teams, GitLab, Trello, SAP C4C, BCS (Projektron))
- **Remote MCP Servers**: Connect any vendor-provided MCP server (e.g., Atlassian, GitHub, Slack). Tools are discovered dynamically via MCP protocol and proxied through the Workoflow endpoint
- **Platform Skills**: Built-in system tools requiring no external auth (PDF generation, file sharing, web search, employee lookup)

### Dynamic Tool Discovery

AI agents discover available tools at runtime via:

```
GET /api/integrations/{org-uuid}/?workflow_user_id={user-id}&tool_type={type}
Authorization: Basic {base64(workoflow:workoflow)}
```

Tool types: `jira`, `confluence`, `sharepoint`, `outlook_mail`, `outlook_calendar`, `msteams`, `gitlab`, `trello`, `sap_c4c`, `projektron`, `remote_mcp`, `system`

### Tool Execution

All tools execute through unified endpoint:

```
POST /api/integrations/{org-uuid}/execute?workflow_user_id={user-id}
Authorization: Basic {base64(workoflow:workoflow)}
Content-Type: application/json

{
  "tool": "jira_search_123",
  "parameters": {
    "jql": "project = DEMO AND status = Open",
    "maxResults": 50
  }
}
```

## Quick Start

[Getting Started Guide](/CLAUDE.md#setup): Complete setup for development and production environments

[API Examples](/API_EXAMPLES.md): cURL examples for authentication, tool discovery, and execution

## Architecture Documentation

[Plugin System](/CLAUDE.md#integration-system): How integrations work - IntegrationInterface, ToolDefinition, IntegrationRegistry

[Security Model](/CLAUDE.md#security): Authentication mechanisms, encryption (JWT + Sodium), audit logging

[Entity Relationships](/CLAUDE.md#entities--data-model): User, Organisation, IntegrationConfig data model

[Development Rules](/CLAUDE.md#development-rules): Code quality verification, CHANGELOG.md guidelines, SOLID principles

## Integration Documentation

[Jira Integration](/docs/JIRA.md): 12 tools for issue management, sprint planning, board operations, workflow transitions, comment management

[GitLab Integration](/docs/GITLAB.md): 34 tools covering complete DevOps lifecycle - repositories, merge requests, pipelines, issues, milestones

[Trello Integration](/docs/TRELLO.md): 12 tools for board management, card operations, list handling, label management

[SharePoint Integration](/sharepoint-setup.md): 6 tools for document search (KQL), file reading (PDF, Word, Excel, PowerPoint), downloads

[Channel System](/docs/CHANNEL.md): Multi-channel support for Slack, MS Teams, WhatsApp with user authentication

**Confluence Integration**: 5 tools for CQL search, page management, content creation, comment handling (see API_EXAMPLES.md and CLAUDE.md)

**SAP C4C Integration**: Lead management, opportunity tracking, account management for SAP Cloud for Customer (see CHANGELOG.md for features)

## Tool Catalog

### Integration Tool Summary

The platform provides 85+ tools across 10 user integrations:

**Jira (12 tools)**
- Issue search and management (JQL queries)
- Sprint planning and board operations
- Workflow transitions and status changes
- Comment management and collaboration

**Confluence (5 tools)**
- Page search (CQL queries)
- Page creation, updates, and retrieval
- Comment management

**SharePoint (6 tools)**
- Document search with KQL
- File reading (PDF, Word, Excel, PowerPoint)
- File listings and downloads

**Outlook Mail (4 tools)** *(experimental)*
- Email search with KQL (sender, subject, keywords)
- Full email reading with body and attachments list
- Mail folder listing and browsing

**Outlook Calendar (5 tools)** *(experimental)*
- Calendar view with recurring event expansion
- Event search by subject and date range
- Free/busy availability checks for scheduling
- Multi-calendar support

**MS Teams (8 tools)** *(experimental)*
- Team and channel listing and navigation
- Channel message reading and posting
- Channel creation
- 1:1 and group chat reading and messaging

**GitLab (34 tools)**
- Repository management (create, list, branches)
- Merge request operations (create, update, approve, merge)
- Pipeline management (list, run, cancel)
- Issue tracking and milestone management
- Wiki and snippet operations

**Trello (12 tools)**
- Board management (create, list, archive)
- Card operations (create, update, move, comment)
- List management (create, update, archive)
- Label and member management

**SAP C4C (8 tools)**
- Lead management (search, create, update)
- Opportunity tracking
- Account and contact management
- Activity logging

**BCS (Projektron) (1 tool)**
- Task and project discovery (get all available items)
- Time tracking preparation (booking URLs)

### Tool Discovery

**Runtime Discovery** (Recommended for AI Agents):

```bash
# Get all available tools for an organization
curl -X GET "https://your-domain.com/api/integrations/{org-uuid}/?workflow_user_id={user-id}" \
  -H "Authorization: Basic d29ya29mbG93Ondvcmtvd29yaw=="

# Filter by integration type
curl -X GET "https://your-domain.com/api/integrations/{org-uuid}/?workflow_user_id={user-id}&tool_type=jira,confluence" \
  -H "Authorization: Basic d29ya29mbG93Ondvcmtvd29yaw=="

# Include system tools
curl -X GET "https://your-domain.com/api/integrations/{org-uuid}/?workflow_user_id={user-id}&tool_type=system" \
  -H "Authorization: Basic d29ya29mbG93Ondvcmtvd29yaw=="
```

Returns OpenAPI-style tool definitions with:
- Tool names (e.g., `jira_search_123`, `confluence_get_page_456`)
- Descriptions with integration context
- Parameter schemas with types and validation
- Required vs optional fields
- Tool category (`read`, `write`, or `delete`)

### Tool Access Modes

Each user can set a **Tool Access Mode** on their profile to control which tool categories are available:

- **Read Only**: Only `read` tools (search, list, get). Safest mode for browsing data.
- **Standard**: `read` + `write` tools (create, update, transition). For productive work.
- **Full**: All tools including `delete`. Use with caution.

The API enforces these modes — tools outside the user's allowed categories are excluded from discovery and return HTTP 403 if executed directly. Existing users default to Standard mode; new users default to Read Only.

**Static Export**:

[tools-export.xml](/tools-export.xml): Complete tool catalog export in XML format

Export your own tools:
```bash
docker-compose exec frankenphp php bin/console app:export-tools --category=system
```

## Prompt Vault

The Prompt Vault is a shared library for managing, organizing, and discovering AI prompts. Users can create personal or team-shared prompts, tag them with categories, skills (integrations), and target AI platforms.

**Platform Tagging**: Each prompt can be tagged with the AI platform it's designed for (e.g., ChatGPT, Claude Desktop, Claude Code, Copilot, Cursor, Gemini, GitHub Copilot, Workoflow, and more). Filter prompts by platform in the UI or via API using `?platform=chatgpt`.

**API Access**: Prompts are accessible via REST API at `/api/prompts` with filtering by scope, category, skill, and platform. Authentication via `X-Prompt-Token` header or `Authorization: Bearer` token.

## AI Agent System

[Multi-Agent Architecture](/docs/agents/system_prompts/README.md): Main orchestrator agent + specialized sub-agents for different integration types

[n8n Workflows](/docs/agents/n8n/README.md): Ready-to-import workflow configurations for AI agent automation

[System Prompts](/docs/agents/system_prompts/): XML-based agent instructions for each integration type

[Multi-Agent Data Passing Tests](/docs/agents/MULTI_AGENT_DATA_PASSING_TESTS.md): Testing patterns for agent communication

## API Reference

### Authentication

Basic Auth credentials (default):
- Username: `workoflow`
- Password: `workoflow`
- Base64 encoded: `d29ya29mbG93Ondvcmtvd29yaw==`

For production, use JWT tokens via magic link authentication.

### Endpoints

**Tenant Settings** (for bot multi-tenancy):
```
GET /api/tenant/{org-uuid}/settings
Authorization: Basic {base64(user:password)}
```
Returns: `{ success, complete, settings: { name, uuid, webhook_type, webhook_url } }`

**List Available Tools**:
```
GET /api/integrations/{org-uuid}/?workflow_user_id={user-id}
```

**Execute Tool**:
```
POST /api/integrations/{org-uuid}/execute?workflow_user_id={user-id}
```

**Tool Filtering**:
```
?tool_type=jira,confluence,sharepoint,outlook_mail,outlook_calendar,msteams,gitlab,trello,sap_c4c,projektron,system
```

**Error Responses**:
- 400: Invalid parameters or missing required fields
- 401: Authentication failed
- 403: Access denied to organization or integration
- 404: Tool not found or organization not found
- 500: Server error or integration execution failure

### Example Workflows

[API Examples](/API_EXAMPLES.md): Complete examples including:
1. Authentication and token generation
2. Listing available tools
3. Executing Jira search
4. Creating Confluence pages
5. Searching SharePoint documents
6. Managing GitLab merge requests
7. Creating Trello cards
8. Managing SAP C4C leads

## Channel System

[Channel Documentation](/docs/CHANNEL.md): Multi-channel support for Slack, MS Teams, WhatsApp integration with user authentication and authorization

## Development

[Testing Guide](/docs/TESTING.md): Automated tests, test users (puppeteer.test1@example.com), and quality checks

[Setup Script](/docs/SETUP_SH.md): Comprehensive setup.sh script documentation for dev and production deployment

[Code Quality](/CLAUDE.md#code-quality-verification): PHPStan (level 6), PHP CodeSniffer (PSR-12), automated checks

## Deployment

**Environment Variables**: Configure via .env:
- Database credentials (MariaDB)
- OAuth2 settings (Google Client ID/Secret)
- S3/MinIO configuration
- Encryption keys (JWT + Sodium)
- API authentication credentials

**Database Schema**: Updated directly from entity definitions using `doctrine:schema:update --force`

**Docker Deployment**: FrankenPHP with Caddy web server, Redis caching, MariaDB storage, MinIO S3-compatible object storage

**Access Points**:
- Application: Port 3979 (configurable)
- MinIO Console: Port 9001 (admin/workoflow123)

## Monitoring & Logging

- Audit logs in `/var/log/audit.log`
- API access logging via Monolog
- Error tracking with multiple channels
- IP address and User Agent tracking
- Organisation-level audit trail

## Optional

[Changelog](/CHANGELOG.md): User-facing changes, features, fixes, and improvements

[Tool Export XML](/tools-export.xml): Complete tool catalog in XML format for offline reference

[Work on n8n Agents Prompt](/docs/work_on_n8n_agents_prompt.md): Development workflow for n8n agent integration

[Concept Documents](/CONCEPT/): Implementation guides for specific features (Share File Tool, Symfony patterns)

---

**For AI Agents**: This platform is designed for you. Use the dynamic tool discovery endpoint to get real-time tool definitions, then execute tools through the unified API. The plugin architecture means new integrations are added regularly - always check the discovery endpoint for the latest capabilities.

**For Developers**: Start with the API Examples, use the tool discovery endpoint to explore available integrations, and reference the architecture documentation to understand the plugin system. The platform follows SOLID principles and uses modern Symfony patterns.

**Need Help?**: Check the comprehensive documentation in /docs, review API_EXAMPLES.md for practical examples, or consult CLAUDE.md for development guidelines.
